{% extends 'base.html' %}

{% block content %}
    <nav class="uk-navbar-container uk-navbar-transparent uk-margin-large-top" uk-navbar>
        <div class="uk-navbar-right">
            <div>
                <a class="uk-navbar-toggle" uk-search-icon href="#"></a>
                <div class="uk-drop" uk-drop="mode: click; pos: left-center; offset: 0">
                    <form class="uk-search uk-search-navbar uk-width-1-1">
                        <input id="search" class="uk-search-input" type="search" placeholder="Поиск" autofocus>
                    </form>
                </div>
            </div>
        </div>
    </nav>
    <table class="uk-table uk-table-hover uk-table-divider">
        <thead>
        <tr>
            <th>ФИО ребенка</th>
            <th>День рождения ребенка</th>
        </tr>
        </thead>
        <tbody id="results">

        </tbody>
    </table>
<script>
    const data = {{ children|safe }};
    const search = document.getElementById("search");
    const results = document.getElementById("results");
    let search_term = "";

    const showList = () => {
        results.innerHTML = "";
        data
            .filter((item) => {
                return (
                    item.child_name.toLowerCase().includes(search_term) ||
                    item.child_surname.toLowerCase().includes(search_term)
                );
            })
            .forEach((e) => {
                const tr = document.createElement("tr");
                tr.innerHTML = `<td>${e.child_name}</td><td>${e.child_surname}</td> `;
                results.appendChild(tr);
            });
    };

    showList();

    search.addEventListener("input", (event) => {
        search_term = event.target.value.toLowerCase();
        showList();
    });
</script>
{% endblock %}